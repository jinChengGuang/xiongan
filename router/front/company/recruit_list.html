<div class="container-fluid header pf t-0 h-45 lh-45 bg-fff z-100 fixed-top" >
  <div class="row">
    <div class="col-1 icon icon_1 mt-3 pl-2" style='font-size:18px;'>&#xe873;</div>
    <div class="col-10 pl-2" >
      <input type="autocomplete" placeholder="搜索职位/公司" class='h-28 w-100 bg-fff f-s-8 t-c-eee' style='padding-left: 10%;'v-model="p.name" @focus='link'>
      <span class='icon' style='position: absolute; top:40%; left:5%;'>&#xe7fd;</span>
    </div>
    <div class="col-1 icon pl-0 mt-3 letter" style='font-size:18px; position: relative'><a href='/front/company/mail'>&#xe7d5;<a><span style='position: absolute; display: inline-block; width:6px; height:6px; background: red; border-radius: 50%; top:0; right:34%;' v-show='msg.length != 0'></span></div>
  </div>
</div>
<!--过滤-->
<div class="container-fluid box m-t-50 pr">
  <div class="row row-one h-40 lh-40 bg-fff">
    <div class="col-3 screen p-0 f-s-6"><a href="###" class='dinb w-100 ta-c h-26 lh-26 m-t-p6 bor-r-sol bor-ccc t-c-0a0' @click="show(area)">地区<i class='icon p-l-3 m-t-p3'>&#xe7c3;</i></a></div>
    <div class="col-3 screen p-0 f-s-6"><a href="###" class='dinb w-100 ta-c h-26 lh-26 m-t-p6 bor-r-sol bor-ccc t-c-0a0' @click="show(pay)">薪资<i class='icon p-l-3 m-t-p3'>&#xe7c3;</i></a></div>
    <div class="col-3 screen p-0 f-s-6"><a href="###" class='dinb w-100 ta-c h-26 lh-26 m-t-p6 bor-r-sol bor-ccc t-c-0a0' @click="show(time)">发布时间<i class='icon p-l-3 m-t-p3'>&#xe7c3;</i></a></div>
    <div class="col-3 screen p-0 f-s-6 bor-0"><a href="/front/company/job_send" class='dinb w-100 ta-c h-26 lh-26 m-t-p6  t-c-0a0'>发布岗位</a></div>
  </div>
</div>

<!--弹层-->
<div class='window container-fluid p-0 h-400 bg-rgba w-100 pa t-14 z-100' id='pop' style='display: none;'>
  <div class='datail h-150 bg-fff m-t-3 pr'>
    <ul class='m-b-0'>
      <li class='float-left p-l-f2 .p-r-f2 w-25 ta-c m-t-5' v-if='arry == area' v-for='n in arry'><span class='bor-sol bor-ccc br-5 dinb p-y-3 w-100 f-s-8' @click='p.area = n'>{{n}}</span></li>
      <li class='float-left p-l-f2 .p-r-f2 w-25 ta-c m-t-5' v-if='arry == pay' v-for='n in arry'><span class='bor-sol bor-ccc br-5 dinb p-y-3 w-100 f-s-8' @click='p.pay = n'>{{n}}</span></li>
      <li class='float-left p-l-f2 .p-r-f2 w-25 ta-c m-t-5' v-if='arry == time' v-for='n in arry'><span class='bor-sol bor-ccc br-5 dinb p-y-3 w-100 f-s-8' @click='p.time = n.value'>{{n.name}}</span></li>
    </ul>
    <button class='w-100 h-35 m-t-p3 f-s-8 t-c-fff bg-d pa b-0 l-0' @click='search'>确定</button>
  </div>
</div>

<!--热门岗位1-->
<div v-show='list.length != 0'>
  <ul class="m-t-p3 m-b-80 f-s-8">
    <li class="m-10 p-10 bg-white bor-r-5 pr row" v-for='n in list'>
      <p class="w-100 m-b-10">
        <span class="f-s-10 f-w-6">{{n.name}}</span>
        <span class="float-right">{{n.issue_time}}</span>
      </p>
      <p class="w-100 m-b-5">
        <span class="t-c-ff5">{{n.pay}}</span>
      </p>
      <p class="w-100 m-b-5">
        <span><i class="icon">&#xe621;</i>{{n.area}}</span>
        <span><i class="icon">&#xe86a;</i>{{n.education}}</span>
        <span><i class="icon">&#xe68c;</i>{{n.experience}}</span>
      </p>
      <p class="w-100 m-b-5">
        <span class="bor p-x-2 m-l-3 bor-sol bor-ccc t-c-d br-5 p-l-5 f-s-5 dinb m-t-5" v-for="i in n.benefit.split('|')">{{i}}</span>
      </p>
      <p class="w-100 m-b-5">
        <i class="icon">&#xe621;</i>
        <span><a href="/front/company/company_list">{{n.cname}}</a></span>
      </p>
    </li>
  </ul>
</div>

<!--过滤为空-->
<div class='null' v-show="list.length == 0 && type=='filter'">
  <div class='none w-w200 h-200 m-l-f16 m-t-p30 m-b-b3'>
    <img src="../../../skins/img/none.png">
  </div>
</div>
<!--搜索为空-->
<div class='null' v-show="list.length == 0 && type != 'filter'">
  <div class='none w-w200 h-200 m-l-f16 m-t-p5 m-b-b3'>
    <img src="../../../skins/img/none.png">
  </div>
  <div class="company m-b-b3">
    <div class='post container-fluid h-40 w-100 bg-fff m-t-p10 f-s-8 lh-40 bor-b-sol bor-ccc'>
      <span class="icon p-r-r3">&#xe8b0;</span>
      <span class='t-c-666 f-s-8'>该公司职位</span>
    </div>
  </div>
  <div>
    <ul class="m-t-p3 m-b-80 f-s-8">
      <li class="m-10 p-10 bg-white bor-r-5 pr row" v-for='n in recommend'>
        <p class="w-100 m-b-10">
          <span class="f-s-10 f-w-6">电商产品经理</span>
          <span class="float-right">今天</span>
        </p>
        <p class="w-100 m-b-5">
          <span class="t-c-ff5">3000-5000</span>
        </p>
        <p class="w-100 m-b-5">
          <span><i class="icon">&#xe621;</i>保定 北市区</span>
          <span><i class="icon">&#xe86a;</i>大专及以上</span>
          <span><i class="icon">&#xe68c;</i>经验不限</span>
        </p>
        <p class="w-100 m-b-5">
          <span class="bor p-0 bor-sol bor-ccc t-c-d br-5 f-s-5 dinb m-t-5">五险一金</span>
          <span class="bor p-0 bor-sol bor-ccc t-c-d br-5 f-s-5 dinb m-t-5">周日单休</span>
          <span class="bor p-0 bor-sol bor-ccc t-c-d br-5 f-s-5 dinb m-t-5">法定节假</span>
        </p>
        <p class="w-100 m-b-5">
          <i class="icon">&#xe621;</i>
          <span>保定市和社区外包有限公司</span>
        </p>
      </li>
    </ul>
  </div>
</div>
<%- f%>

<script> 
  new Vue({
    el:'#app',
    data:{
      list:[],
      recommend:[],
      area:[],
      pay:[],
      time:[{value:'',name:'全部'},{value:1,name:'今天'},{value:3,name:'三天以内'},{value:7,name:'七天以内'},{value:15,name:'半个月内'},{value:30,name:'一个月内'}],
      arry:[],
      p:{
        name:'',
        area:'',
        pay:'',
        time:'',
      },
      type:'',
      msg:[],
    },
    mounted(){
      this.ajax.get('/job/all/list?name=' + this.p.name,(res)=>{
        this.list = res.data
        console.log(this.list)
      },(err)=>{
        console.log(err)
      }),
      this.ajax.get('/search/recommend?name=' + this.p.name,(res)=>{
        this.recommend = res.data
      },(err)=>{
        console.log(err)
      }),
      this.ajax.get('/area/list',(res)=>{
        this.area = res.data
      },(err)=>{
        console.log(err)
      })
      this.ajax.get('/pay/list',(res)=>{
        this.pay = res.data
      },(err)=>{
        console.log(err)
      })
      this.ajax.get('/msg/red',(res)=>{
        this.msg = res.data
      },(err)=>{
        console.log(err)
      })
    },
    methods: {
      show(ary){
        this.arry = ary
        let pop = document.getElementById('pop')
        pop.style.display = 'block'
      },
      search(){
        if(!this.p.name){
          this.type = 'filter'
        }
        this.ajax.get('/job/all/list?area=' + this.p.area + '&pay=' + this.p.pay + '&time=' + this.p.time + '&name=' + this.p.name,(res)=>{
          this.list = res.data
          pop.style.display = 'none'
        },(err)=>{
          console.log(err)
        })
        this.p.area = ''
        this.p.pay = ''
        this.p.time = ''
      },
      link(){
        window.location.href = '/front/company/search'
      }
    }
  })
</script>