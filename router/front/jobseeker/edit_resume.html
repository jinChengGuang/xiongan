<%- tname %>
<div class="container-fluid m-t-46 bg-white none">
  <div class="p-x-p5 h-150" style = 'background-image:url("../../../skins/img/header.jpg")'>
    <div class="col-12 text-center p-t-p9" >
      <div class="w100 h100 br-h bg-white ma" @click='openfile'>
          <img class="w100 h100 br-h" :src="data.head" v-if='data.head'>
          <i class="icon f-s-26 p-t-25"  v-else >&#xe81e;</i>
          <input type="file" class="dn" id = 'head' @change='upload'>
        </div>
    </div>
  </div>
  <div class="box">
    <div class="f-s-9  bor-b-sol bor-eae pt-2 pb-2 m-x-12">
      <div class="col-12 t-c-00b f-s-f17 p-x-0">个人基本信息</div>
    </div>
    <div class="row f-s-9  bor-b-sol bor-eae pt-2 pb-2 m-x-12 ">
      <label class="col-3 bor-r-sol bor-f6 p-x-0 m-b-0">姓名</label>
      <div class="col-8 text-right">
        <input type="text" class="form-control-plaintext border-0 w-100 text-right p-y-0 in-out" placeholder="请输入姓名" v-model='data.name'>
      </div>
      <div class="col-1 align-self-center text-center p-x-0">
        <span class="t-c-e20">*</span>  
      </div>
    </div>

    <div class="row f-s-9  bor-b-sol bor-eae pt-2 pb-2 m-x-12">
      <label for="" class="col-3 bor-r-sol bor-f6 p-x-0 m-b-0">性别</label>
      <div class="col-8 p-x-0 text-right">
        <div class="form-check form-check-inline m-b-0">
          <label class="form-check-label custom-radio m-b-0">
          <input class="custom-control-input" type="radio" name="isopen" value="0" v-model='data.sex' >
          <span class="custom-control-indicator"></span>
          <span class="custom-control-description align-self-center">男</span>
        </label>
        </div>
        <div class="form-check form-check-inline m-b-0">
          <label class="form-check-label custom-radio m-b-0">
          <input class="custom-control-input" type="radio" name="isopen" value="1" v-model='data.sex' >
          <span class="custom-control-indicator"></span>
          <span class="custom-control-description align-self-center">女</span>
        </label>
        </div>
      </div>
      <div class="col-1 align-self-center text-center p-x-0">
        <span class="t-c-e20">*</span>  
      </div>
    </div>

    <div class="row f-s-9  bor-b-sol bor-eae pt-2 pb-2 m-x-12">
      <label class="col-3 bor-r-sol bor-f6 p-x-0 m-b-0">出生年月</label>
      <div class="col-8 text-right p-x-0">
        <input type="date" class="p-x-0 text-right  h-24 t-c-666 f-s-f14 p-l-2" v-model='data.birthday'>
      </div>
      <div class="col-1 align-self-center text-center p-x-0">
        <span class="t-c-e20">*</span>  
      </div>
    </div>

    <div class="row f-s-9  bor-b-sol bor-eae pt-2 pb-2 m-x-12">
      <label for="" class="col-3 bor-r-sol bor-f6 p-x-0 m-b-0">最高学历</label>
      <div class="col-8 p-x-0 align-self-center text-right">
        <select v-model='data.education' class='bg-fff h-20'>
          <option v-for ="v in education" :value="v">{{v}}</option>
        </select>
      </div>
      <div class="col-1 align-self-center text-center p-x-0">
        <span class="t-c-e20">*</span>  
      </div>
    </div>

    <div class="row f-s-9  bor-b-sol bor-eae pt-2 pb-2 m-x-12">
      <label class="col-3 bor-r-sol bor-f6 p-x-0 m-b-0">工作经验</label>
      <div class="col-8 p-x-0 align-self-center text-right">
        <select v-model='data.experience' class='bg-fff h-20'>
          <option v-for ="v in kind" :value="v">{{v}}</option>
        </select>
      </div>
      <div class="col-1 align-self-center text-center p-x-0">
        <span class="t-c-e20">*</span>  
      </div>
    </div>

    <div class="row f-s-9  bor-b-sol bor-eae pt-2 pb-2 m-x-12">
      <label for="" class="col-3 bor-r-sol bor-f6 p-x-0 m-b-0">现居住地</label>
      <div class="col-8 p-x-0 align-self-center text-right">  
        <select  v-model='data.area' class='bg-fff h-20'>
          <option v-for ="v in area" :value="v.name">{{v.name}}</option>
        </select>
      </div>
      <div class="col-1 align-self-center text-center p-x-0 ">
        <span class="t-c-e20">*</span>  
      </div>
    </div>

    <div class="row f-s-9  bor-b-sol bor-eae pt-2 pb-2 m-x-12">
      <label for="" class="col-3 bor-r-sol bor-f6 p-x-0 m-b-0">手机号码</label>
      <div class="col-8 text-right">
        <input type="text"  v-model='data.mobile' class="form-control-plaintext border-0 w-100 text-right p-y-0 in-out" placeholder="请输入手机号码">
      </div>
      <div class="col-1 align-self-center text-center p-x-0">
        <span class="t-c-e20">*</span>  
      </div>
    </div>

    <div class="row f-s-9  bor-b-sol bor-eae pt-2 pb-2 m-x-12">
      <label for="" class="col-3 bor-r-sol bor-f6 p-x-0">邮箱</label>
      <div class="col-8 text-right">
        <input type="text" v-model='data.email' class="form-control-plaintext border-0 w-100 text-right p-y-0 in-out" placeholder="请输入邮箱">
      </div>
      <div class="col-1 align-self-center text-center p-x-0">
        <span class="t-c-e20">*</span>  
      </div>
    </div>
  </div>
</div>

<div class="text-center">
  <button @click='add' class="btn bg-00b t-c-white m-y-10 p-x-30">确定</button>
</div>

<!--失败弹层-->
<div class="weui-toast weui-animate-fade-in dn" style='padding-top:22px' id='fail'>
  <i class="weui-icon_toast icon f-s-f45 t-c-white m-y-10">&#xe82c;</i> 
  <p class="weui-toast__content">请将信息填写完整！</p > 
</div>

<script>
new Vue({
  el: '#app',
  data: {
    data: {},
    experience:[],
    education:[],
    area:[],
    kind:[],
    name:'我的简历'
  },
  mounted () {
    this.ajax.get('/user/resume', (res) => {
      this.data = res.data[0]
      this.data.birthday= this.time.dateFormat('yyyy-MM-dd',this.data.birthday)
    }, (res) => {
      console.log(res.errmsg)
    })
    this.ajax.get('/experience/list', (res) => {
      this.experience = res.data
    }, (res) => {
      console.log(res.errmsg)
    })
    this.ajax.get('/education/list', (res) => {
      this.education = res.data
    }, (res) => {
      console.log(res.errmsg)
    })
    this.ajax.get('/area/list', (res) => {
      this.area = res.data
    }, (res) => {
      console.log(res.errmsg)
    })
    this.ajax.get('/experience/list', (res) => {
      this.kind = res.data
    }, (res) => {
      console.log(res.errmsg)
    })
  },
  methods: {
   openfile () {
     $(head).click()
		},
    upload(){
      // 第一个为id 第二个为config定义的规则
      this.uploadimg.working('head','head').then((res)=>{
        this.data.head = res.data[0].path
        this.ajax.put('/edit/basis', this.data,(res) => {
          weui.toast('编辑成功', 2000);
        }, (res) => {
            console.log(res.errmsg)
        })
      })
    },
    add(){
      if(this.data.name == '' || !this.data.birthday || this.data.education =='' || this.data.experience == '' || this.data.area == '' || this.data.mobile == '' || this.data.email == ''){
        document.getElementById('fail').style.display = 'block'
        setTimeout("document.getElementById('fail').style.display='none'",1500)
        return
      }
      this.data.birthday=(new Date(this.data.birthday).getTime() / 1000)
      this.ajax.put('/edit/basis', this.data,(res) => {
      weui.toast('编辑成功', 2000);
      setTimeout("window.location.href='/front/jobseeker/resume_detail'",1500)
      }, (res) => {
        console.log(res.errmsg)
      })
    }
  }
})
</script>
